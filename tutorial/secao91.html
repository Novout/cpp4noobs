<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>9.1 - Protetores de Cabeçalho | Curso de CPP da He4rt Developers</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="C++">
    <link rel="preload" href="/cpp4noobs/assets/css/0.styles.7bc9775c.css" as="style"><link rel="preload" href="/cpp4noobs/assets/js/app.8602b569.js" as="script"><link rel="preload" href="/cpp4noobs/assets/js/2.132f306b.js" as="script"><link rel="preload" href="/cpp4noobs/assets/js/43.ec818225.js" as="script"><link rel="prefetch" href="/cpp4noobs/assets/js/10.e0c51750.js"><link rel="prefetch" href="/cpp4noobs/assets/js/11.fe558f42.js"><link rel="prefetch" href="/cpp4noobs/assets/js/12.a1c4a612.js"><link rel="prefetch" href="/cpp4noobs/assets/js/13.9037b6fa.js"><link rel="prefetch" href="/cpp4noobs/assets/js/14.a99c8225.js"><link rel="prefetch" href="/cpp4noobs/assets/js/15.3a54eb0c.js"><link rel="prefetch" href="/cpp4noobs/assets/js/16.89b1091c.js"><link rel="prefetch" href="/cpp4noobs/assets/js/17.6d03629b.js"><link rel="prefetch" href="/cpp4noobs/assets/js/18.747f8e52.js"><link rel="prefetch" href="/cpp4noobs/assets/js/19.0d6370dd.js"><link rel="prefetch" href="/cpp4noobs/assets/js/20.dce2d97e.js"><link rel="prefetch" href="/cpp4noobs/assets/js/21.992cc5d1.js"><link rel="prefetch" href="/cpp4noobs/assets/js/22.2c11be6f.js"><link rel="prefetch" href="/cpp4noobs/assets/js/23.37276497.js"><link rel="prefetch" href="/cpp4noobs/assets/js/24.79aa2cf0.js"><link rel="prefetch" href="/cpp4noobs/assets/js/25.008a0e74.js"><link rel="prefetch" href="/cpp4noobs/assets/js/26.96564008.js"><link rel="prefetch" href="/cpp4noobs/assets/js/27.dd920032.js"><link rel="prefetch" href="/cpp4noobs/assets/js/28.90c9d71f.js"><link rel="prefetch" href="/cpp4noobs/assets/js/29.1596d040.js"><link rel="prefetch" href="/cpp4noobs/assets/js/3.ef2ca1bb.js"><link rel="prefetch" href="/cpp4noobs/assets/js/30.e29638df.js"><link rel="prefetch" href="/cpp4noobs/assets/js/31.db925837.js"><link rel="prefetch" href="/cpp4noobs/assets/js/32.f8d58f02.js"><link rel="prefetch" href="/cpp4noobs/assets/js/33.63f37e8b.js"><link rel="prefetch" href="/cpp4noobs/assets/js/34.e11afcc1.js"><link rel="prefetch" href="/cpp4noobs/assets/js/35.083e38c7.js"><link rel="prefetch" href="/cpp4noobs/assets/js/36.a5ccc905.js"><link rel="prefetch" href="/cpp4noobs/assets/js/37.c91a4a32.js"><link rel="prefetch" href="/cpp4noobs/assets/js/38.1899712b.js"><link rel="prefetch" href="/cpp4noobs/assets/js/39.ab883152.js"><link rel="prefetch" href="/cpp4noobs/assets/js/4.8bcfc7b4.js"><link rel="prefetch" href="/cpp4noobs/assets/js/40.35d7ccdf.js"><link rel="prefetch" href="/cpp4noobs/assets/js/41.e81764f1.js"><link rel="prefetch" href="/cpp4noobs/assets/js/42.063bbc85.js"><link rel="prefetch" href="/cpp4noobs/assets/js/5.f0cfa0a7.js"><link rel="prefetch" href="/cpp4noobs/assets/js/6.eacc7384.js"><link rel="prefetch" href="/cpp4noobs/assets/js/7.fc070f90.js"><link rel="prefetch" href="/cpp4noobs/assets/js/8.092b7b87.js"><link rel="prefetch" href="/cpp4noobs/assets/js/9.d52b971f.js">
    <link rel="stylesheet" href="/cpp4noobs/assets/css/0.styles.7bc9775c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cpp4noobs/" class="home-link router-link-active"><!----> <span class="site-name">Curso de CPP da He4rt Developers</span></a> <div class="links"><!----> <div class="user-settings"><a href="#" class="settings-button"><svg aria-hidden="true" data-prefix="fas" data-icon="cog" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-cog fa-w-16 settings-icon"><path fill="currentColor" d="M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"></path></svg></a> <div class="user-settings-menu" style="display:none;"><div class="theme-options"><!----> <!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox"></div> <!----> <!----></div></div></div> <!----> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/cpp4noobs/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/cpp4noobs/tutorial/" class="nav-link router-link-active">
  Tutorial
</a></div><div class="nav-item"><a href="https://twitter.com/He4rtDevs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  He4rt
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/cpp4noobs/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/cpp4noobs/tutorial/" class="nav-link router-link-active">
  Tutorial
</a></div><div class="nav-item"><a href="https://twitter.com/He4rtDevs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  He4rt
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/cpp4noobs/tutorial/" aria-current="page" class="sidebar-link">0 - Bem-Vindo ao Tutorial!</a></li><li><a href="/cpp4noobs/tutorial/secao1.html" class="sidebar-link">1 - Configurando o Ambiente</a></li><li><a href="/cpp4noobs/tutorial/secao11.html" class="sidebar-link">1.1 - Instalando o Falcon C++</a></li><li><a href="/cpp4noobs/tutorial/secao2.html" class="sidebar-link">2 - Um pouco de teoria</a></li><li><a href="/cpp4noobs/tutorial/secao3.html" class="sidebar-link">3 - Primeiro Hello World</a></li><li><a href="/cpp4noobs/tutorial/secao4.html" class="sidebar-link">4 - Introdução ao compilador e vinculador</a></li><li><a href="/cpp4noobs/tutorial/secao5.html" class="sidebar-link">5 - Variáveis</a></li><li><a href="/cpp4noobs/tutorial/secao51.html" class="sidebar-link">5.1 - Operações Matemáticas</a></li><li><a href="/cpp4noobs/tutorial/secao52.html" class="sidebar-link">5.2 - std::string</a></li><li><a href="/cpp4noobs/tutorial/secao6.html" class="sidebar-link">6 - Condições</a></li><li><a href="/cpp4noobs/tutorial/secao61.html" class="sidebar-link">6.1 - Loops</a></li><li><a href="/cpp4noobs/tutorial/secao62.html" class="sidebar-link">6.2 - Teste de Mesa</a></li><li><a href="/cpp4noobs/tutorial/secao7.html" class="sidebar-link">7 - Vetores (C Arrays)</a></li><li><a href="/cpp4noobs/tutorial/secao71.html" class="sidebar-link">7.1 - std::array e std::vector</a></li><li><a href="/cpp4noobs/tutorial/secao72.html" class="sidebar-link">7.2 - Matrizes</a></li><li><a href="/cpp4noobs/tutorial/secao8.html" class="sidebar-link">8 - Funções</a></li><li><a href="/cpp4noobs/tutorial/secao81.html" class="sidebar-link">8.1 - Protótipo de Função</a></li><li><a href="/cpp4noobs/tutorial/secao82.html" class="sidebar-link">8.2 - Argumentos da função main</a></li><li><a href="/cpp4noobs/tutorial/secao83.html" class="sidebar-link">8.3 - Recursão</a></li><li><a href="/cpp4noobs/tutorial/secao84.html" class="sidebar-link">8.4 - Funções Lambda</a></li><li><a href="/cpp4noobs/tutorial/secao85.html" class="sidebar-link">8.5 - Keyword Static</a></li><li><a href="/cpp4noobs/tutorial/secao9.html" class="sidebar-link">9 - Header</a></li><li><a href="/cpp4noobs/tutorial/secao91.html" aria-current="page" class="active sidebar-link">9.1 - Protetores de Cabeçalho</a></li><li><a href="/cpp4noobs/tutorial/secao010.html" class="sidebar-link">10 - Namespace</a></li><li><a href="/cpp4noobs/tutorial/secao011.html" class="sidebar-link">11 - Introdução a Ponteiros</a></li><li><a href="/cpp4noobs/tutorial/secao0111.html" class="sidebar-link">11.1 - Referências</a></li><li><a href="/cpp4noobs/tutorial/secao0112.html" class="sidebar-link">11.2 - Smart Pointers</a></li><li><a href="/cpp4noobs/tutorial/secao012.html" class="sidebar-link">12 - Structs</a></li><li><a href="/cpp4noobs/tutorial/secao013.html" class="sidebar-link">13 - Templates</a></li><li><a href="/cpp4noobs/tutorial/secao0131.html" class="sidebar-link">13.1 - Instâncias de Modelo de Função</a></li><li><a href="/cpp4noobs/tutorial/secao014.html" class="sidebar-link">14 - Stack e Heap</a></li><li><a href="/cpp4noobs/tutorial/secao015.html" class="sidebar-link">15 - Auto Keyword</a></li><li><a href="/cpp4noobs/tutorial/secao016.html" class="sidebar-link">16 - Big O Notation</a></li><li><a href="/cpp4noobs/tutorial/secao0161.html" class="sidebar-link">16.1 - Sorting</a></li><li><a href="/cpp4noobs/tutorial/secao017.html" class="sidebar-link">17 - Orientação a Objetos (OOP)</a></li><li><a href="/cpp4noobs/tutorial/secao0171.html" class="sidebar-link">17.1 - Classes</a></li><li><a href="/cpp4noobs/tutorial/secao0172.html" class="sidebar-link">17.2 - Inicialização de Construtores</a></li><li><a href="/cpp4noobs/tutorial/secao0173.html" class="sidebar-link">17.3 - Classes no Header</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_9-1-protetores-de-cabecalho"><a href="#_9-1-protetores-de-cabecalho" class="header-anchor">#</a> 9.1 - Protetores de Cabeçalho</h1> <p>Em seções anteriores observamos que um identificador de variável ou função pode ter apenas uma definição (a regra de uma definição). Assim, um programa que define um identificador de função mais de uma vez causará um erro de compilação:</p> <div class="language-cpp extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
 
<span class="token keyword">int</span> <span class="token function">num</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Definição da função num</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">int</span> <span class="token function">num</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Erro de compilação / Funções duplicadas</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token function">num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Embora esses programas sejam fáceis de corrigir (remova a definição duplicada), com arquivos de cabeçalho, é muito fácil acabar em uma situação em que uma definição em um arquivo de cabeçalho é incluída mais de uma vez. Isso pode acontecer quando um arquivo de cabeçalho <code>#include</code> outro arquivo de cabeçalho (o que é comum).</p> <p>Considere o seguinte exemplo acadêmico:</p> <p><code>a.hpp</code></p> <div class="language-cpp extra-class"><div class="highlight-lines"><br><br><br><br><br></div><pre class="language-cpp"><code><span class="token keyword">float</span> <span class="token function">teste</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1.2f</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>b.hpp</code></p> <div class="language-cpp extra-class"><div class="highlight-lines"><br><br></div><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;a.hpp&quot;</span></span>
</code></pre></div><p><code>main.cpp</code></p> <div class="language-cpp extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br></div><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;a.hpp&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;b.hpp&quot;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Este programa aparentemente inocente não será compilado! Aqui está o que está acontecendo. Primeiro, main.cpp inclui a.hpp, que copia a definição da função <code>teste()</code> para main.cpp. Então main.cpp inclui b.hpp, que inclui a.hpp em si. Isso copia o conteúdo de a.h (incluindo a definição da função teste()) para b.hpp, que é copiada para main.cpp.</p> <p>Assim, depois de resolver todos os <code>#include</code>, o main.cpp acaba assim:</p> <div class="language-cpp extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-cpp"><code><span class="token keyword">float</span> <span class="token function">teste</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1.2f</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">float</span> <span class="token function">teste</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1.2f</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Definições duplicadas e um erro de compilação. Cada arquivo, individualmente, está bem. No entanto, como o main.cpp acaba incluindo o conteúdo de a.h duas vezes, encontramos problemas. Se b.hpp precisar de teste() e main.cpp precisar de b.hpp e a.hpp, como você resolveria esse problema?</p> <h1 id="protetores-de-cabecalho"><a href="#protetores-de-cabecalho" class="header-anchor">#</a> Protetores de Cabeçalho</h1> <div class="language-cpp extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br></div><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">ifndef</span> NOME_UNICO</span>
<span class="token macro property">#<span class="token directive keyword">define</span> NOME_UNICO</span>
 
<span class="token comment">// Declarações</span>
 
<span class="token macro property">#<span class="token directive keyword">endif</span></span>
</code></pre></div><p>Quando esse cabeçalho é incluido, o pré-processador verifica se NOME_UNICO foi definido anteriormente. Se for a primeira vez que incluímos o cabeçalho, NOME_UNICO não será definido. Consequentemente, <code>#define NOME_UNICO</code> e inclui o conteúdo do arquivo. Se o cabeçalho for incluído novamente no mesmo arquivo, NOME_UNICO já terá sido definido desde a primeira vez em que o conteúdo do cabeçalho foi incluído e o conteúdo do cabeçalho será ignorado (graças ao #ifndef).</p> <p>Todos os seus arquivos de cabeçalho devem ter proteções de cabeçalho neles. NOME_UNICO pode ser o nome que você quiser, mas por convenção é definido como o nome completo do arquivo de cabeçalho, digitado em maiúsculas, usando sublinhados para espaços ou pontuação. Por exemplo, a.hpp teria o protetor de cabeçalho:</p> <div class="language-cpp extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br></div><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">ifndef</span> A_H</span>
<span class="token macro property">#<span class="token directive keyword">define</span> A_H</span>

<span class="token keyword">float</span> <span class="token function">teste</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1.2f</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token macro property">#<span class="token directive keyword">endif</span></span>
</code></pre></div><p>Vamos voltar ao exemplo a.hpp, usando o a.hpp com protetores de cabeçalho. Para uma boa forma, também adicionaremos protetores de cabeçalho em b.hpp</p> <p><code>a.hpp</code></p> <div class="language-cpp extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br></div><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">ifndef</span> A_H</span>
<span class="token macro property">#<span class="token directive keyword">define</span> A_H</span>

<span class="token keyword">float</span> <span class="token function">teste</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1.2f</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token macro property">#<span class="token directive keyword">endif</span></span>
</code></pre></div><p><code>b.hpp</code></p> <div class="language-cpp extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br></div><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">ifndef</span> B_H</span>
<span class="token macro property">#<span class="token directive keyword">define</span> B_H</span>
 
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;a.hpp&quot;</span></span>
 
<span class="token macro property">#<span class="token directive keyword">endif</span></span>
</code></pre></div><p><code>main.cpp</code></p> <div class="language-cpp extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br></div><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;a.hpp&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;b.hpp&quot;</span></span>
 
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Depois que o pré-processador resolve todas as inclusões, este programa fica assim:</p> <div class="language-cpp extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">ifndef</span> A_H </span><span class="token comment">// a.hpp incluido de main.cpp,</span>
<span class="token macro property">#<span class="token directive keyword">define</span> A_H </span><span class="token comment">// A_H foi definido aqui</span>
 
<span class="token comment">// Todo esse conteudo foi colocado aqui</span>
<span class="token keyword">float</span> <span class="token function">teste</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1.2f</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

 
<span class="token macro property">#<span class="token directive keyword">endif</span> </span><span class="token comment">// A_H</span>
 
<span class="token macro property">#<span class="token directive keyword">ifndef</span> B_H </span><span class="token comment">// b.hpp incluido de main.cpp</span>
<span class="token macro property">#<span class="token directive keyword">define</span> B_H</span>
<span class="token macro property">#<span class="token directive keyword">ifndef</span> B_H </span><span class="token comment">// a.hpp incluido de b.hpp, A_H foi incluido</span>
<span class="token macro property">#<span class="token directive keyword">define</span> A_H </span><span class="token comment">// Resto do conteudo foi incluido</span>
 
<span class="token keyword">float</span> <span class="token function">teste</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1.2f</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token macro property">#<span class="token directive keyword">endif</span> </span><span class="token comment">// A_H</span>
<span class="token macro property">#<span class="token directive keyword">endif</span> </span><span class="token comment">// B_H</span>
 
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Geralmente, pedimos que você não inclua definições de função em seus cabeçalhos. Então, você deve estar se perguntando por que deve incluir protetores de cabeçalho se eles o protegem de algo que você não deve fazer.</p> <p>Existem alguns casos em que mostraremos no futuro onde é necessário colocar definições de não função em um arquivo de cabeçalho. Por exemplo, o C++ permitirá que você crie seus próprios tipos. Esses tipos definidos pelo usuário geralmente são definidos nos arquivos de cabeçalho, portanto, a definição pode ser propagada para os arquivos de código que precisam usá-los. Sem uma proteção de cabeçalho, seus arquivos de código podem acabar com várias cópias idênticas dessas definições, o que causará um erro de compilação de definição duplicada.</p> <p>Portanto, mesmo que não seja estritamente necessário ter proteções de cabeçalho neste ponto da série de tutoriais, estamos estabelecendo bons hábitos agora, para que você não precise desaprender os maus hábitos mais tarde.</p> <p>#pragma once</p> <p>Muitos compiladores suportam uma forma mais simples e alternativa de proteção de cabeçalho usando a diretiva #pragma:</p> <p><code>exemplo.hpp</code></p> <div class="language-cpp extra-class"><div class="highlight-lines"><br><br><br><br></div><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>

<span class="token comment">// codico</span>
</code></pre></div><p>O #pragma já serviu ao mesmo objetivo que os protetores de cabeçalho e tem o benefício adicional de ser mais curto e menos propenso a erros.</p> <p>No entanto, o #pragma não é uma parte oficial da linguagem C ++ e nem todos os compiladores o suportam (embora a maioria dos compiladores modernos o faça).</p> <p>Para fins de compatibilidade, recomendamos a aderência aos protetores de cabeçalho tradicionais. Eles não são muito mais trabalhosos e têm garantia de suporte em todos os compiladores compatíveis.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/cpp4noobs/tutorial/secao9.html" class="prev">
        9 - Header
      </a></span> <span class="next"><a href="/cpp4noobs/tutorial/secao010.html">
        10 - Namespace
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/cpp4noobs/assets/js/app.8602b569.js" defer></script><script src="/cpp4noobs/assets/js/2.132f306b.js" defer></script><script src="/cpp4noobs/assets/js/43.ec818225.js" defer></script>
  </body>
</html>
